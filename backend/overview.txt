ğŸ‹ï¸â€â™‚ï¸ Sanatan Gym Backend API
A secure, robust, and mobile-first backend system for managing gym memberships. This system features a dual-authentication mechanism (Admin via Environment variables, Members via Database), strict security protocols, and automated calculation logic.

ğŸ›¡ï¸ Project Overview
This backend serves as the core logic for the gym management system. It is designed to be Extremely Secure against common web vulnerabilities (XSS, NoSQL Injection, Brute Force). It handles image uploads to Cloudinary and uses HTTP-Only cookies for session management.

ğŸš€ Key Functionalities
1. Dual-Layer Authentication
Admin Login: The system first checks credentials against server-side .env variables (ADMIN1_MOBILE, ADMIN2_MOBILE). This ensures Admin access is hardcoded and secure, even if the database is compromised.
Member Login: If credentials do not match the Admin, the system searches the MongoDB database.
Token Management: JSON Web Tokens (JWT) are stored in secure, HTTP-Only cookies.
2. Admin Capabilities
Add Member:
Takes details: Name, Mobile, Email, Start Date, Duration (months), Discount, Amount Paid, Focus Note.
Auto-Password: Automatically sets the member's password as their Mobile Number.
Image Upload: Uploads profile pictures directly to Cloudinary.
Auto-Calculation: Automatically calculates the Membership End Date based on the chosen duration.
View Members: Retrieve lists of all registered members.
3. Member Capabilities
First-Time Login: If a member logs in with their default password (Mobile Number), the system flags this and forces a password change.
Dashboard Profile: View personal details, profile picture, and membership status.
Expiry Tracking: View calculated "Days Remaining" for membership expiry.
4. Security Architecture
Helmet: Secure HTTP headers to prevent attacks like clickjacking.
Mongo-Sanitize: Strips data of $ and . to prevent NoSQL Injection.
XSS-Clean: Sanitizes user input to prevent Cross-Site Scripting.
Rate Limiting: Prevents brute-force attacks on login and API endpoints.
CORS: Restricts API access to only the trusted Frontend URL.
HPP: Protects against HTTP Parameter Pollution attacks.
ğŸ“‚ Folder Structure
text

backend/
â”œâ”€â”€ config/
â”‚   â””â”€â”€ cloudinary.js       # Cloudinary storage configuration
â”œâ”€â”€ controllers/
â”‚   â”œâ”€â”€ AuthController.js   # Login, Logout, Password Change logic
â”‚   â””â”€â”€ AdminController.js  # Add Member, Get All Members logic
â”‚   â””â”€â”€ MemberController.js # Get Profile logic
â”œâ”€â”€ middleware/
â”‚   â”œâ”€â”€ verifyToken.js      # Decodes JWT from cookie
â”‚   â”œâ”€â”€ verifyAdmin.js      # Ensures user is Admin
â”‚   â”œâ”€â”€ rateLimiter.js      # Limits repeated requests
â”‚   â””â”€â”€ security.js         # General security headers
â”œâ”€â”€ model/
â”‚   â””â”€â”€ Member.js           # Mongoose Schema
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ authRoutes.js       # Login/Logout routes
â”‚   â”œâ”€â”€ adminRoutes.js      # Admin protected routes
â”‚   â””â”€â”€ memberRoutes.js     # Member protected routes
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ helpers.js          # Validators, Admin Check, Date calculations
â”œâ”€â”€ app.js                  # Express App configuration
â”œâ”€â”€ server.js               # Server entry point
â”œâ”€â”€ package.json            # Dependencies
â””â”€â”€ .env                    # Environment Variables
ğŸ”® Future Roadmap (Not included in this build)
Membership Extension: Automated button to renew/extend membership.
Expiry Alerts: Automated alerts (SMS/Email) 3 days before expiry.
Attendance: QR code based attendance system.
ğŸ› ï¸ Environment Variables (.env)
You will need to configure these variables:

env

NODE_ENV=development
PORT=5000
FRONTEND_URL=http://localhost:5173

# Database
MONGO_URL=mongodb://127.0.0.1:27017/sanatan_gym

# Security
JWT_SECRET=complex_random_string_here
JWT_EXPIRES=7d

# Admin Credentials (Hardcoded Security)
ADMIN1_MOBILE=ADMIN1
ADMIN1_PASSWORD=SecurePass1
ADMIN2_MOBILE=ADMIN2
ADMIN2_PASSWORD=SecurePass2

# Cloudinary (Image Storage)
CLOUDINARY_CLOUD_NAME=your_cloud_name
CLOUDINARY_API_KEY=your_api_key
CLOUDINARY_API_SECRET=your_api_secret
